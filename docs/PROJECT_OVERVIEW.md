# 项目总览

## 项目简介

企业级博客系统是一个基于Go语言开发的高性能、可扩展的内容管理系统。系统采用现代化的架构设计，遵循最佳实践，提供了完整的博客功能。

## 核心功能

### 用户管理
- ✅ 用户注册和登录
  - 邮箱密码登录
  - 手机号验证码登录（自动创建用户）
- ✅ JWT Token认证
- ✅ 用户角色管理（Admin、Editor、Author、Reader）
- ✅ 用户信息管理
- ✅ 密码重置功能（需要验证旧密码）

### 文章管理
- ✅ 文章CRUD操作
- ✅ 文章状态管理（草稿、待审核、已发布、已归档）
- ✅ 文章审核流程（非管理员提交的文章需要管理员审核才能发布）
- ✅ 文章分类和标签
- ✅ 文章搜索（基于 Elasticsearch 全文搜索，支持模糊匹配、多字段搜索、按创建时间排序）
- ✅ 文章浏览统计（view_count，实时更新）
- ✅ 文章点赞统计（like_count，实时更新）
- ✅ 文章评论统计（comment_count，实时更新）
- ✅ 富文本 / Markdown 编辑与预览（前端）
- ✅ 封面图片选择（支持从图片库选择或输入URL）

### 分类和标签
- ✅ 分类管理（支持层级分类）
- ✅ 标签管理
- ✅ 文章与分类/标签关联

### 评论系统
- ✅ 评论创建和管理
- ✅ 嵌套评论（回复功能）
- ✅ 评论审核
- ✅ 支持匿名和登录用户评论
- ✅ 前端评论列表与发表评论表单（文章详情页集成）
- ✅ 评论数实时更新（提交评论后立即更新）

### 图片管理
- ✅ 图片上传（支持JPEG、PNG、GIF、WebP格式）
- ✅ 图片列表和搜索
- ✅ 图片标签和描述管理
- ✅ 图片删除（软删除）
- ✅ 图片选择器（从图片库选择封面图片）
- ✅ 静态文件服务（图片访问）

### 其他功能
- ✅ Redis缓存
- ✅ Elasticsearch全文搜索（完全迁移，支持模糊搜索）
- ✅ 日志记录
- ✅ API限流
- ✅ CORS支持
- ✅ 数据库迁移
- ✅ 前后端分离架构（React + TypeScript 前端）
- ✅ Docker / docker-compose 一键启动（PostgreSQL + Redis + Elasticsearch + 后端 + 前端）
- ✅ 实时数据更新（点赞、收藏、评论数实时显示）
- ✅ 返回按钮（统一的导航体验）

## 技术栈

### 后端
- **语言**: Go 1.21+
- **Web框架**: Gin
- **数据库**: PostgreSQL 12+
- **缓存**: Redis 6+
- **认证**: JWT
- **日志**: Zerolog
- **ORM**: GORM + PostgreSQL 驱动

### 前端

- **语言**: TypeScript
- **框架**: React 18 + React Router 6
- **构建工具**: Vite
- **HTTP 客户端**: Axios
- **UI 特性**:
  - 文章列表 / 详情页（Markdown 渲染）
  - 文章创建 / 编辑（Markdown 编辑 & 预览、草稿 / 发布按钮）
  - 评论区（列表 + 发表评论）
  - 点赞、收藏按钮与统计展示
  - 用户登录 / 注册 / 个人资料编辑
  - 后台用户列表与用户详情

### 开发工具
- **测试**: Go testing + benchmark
- **文档**: Markdown
- **构建**: Make
- **容器化**: Docker

## 项目结构

```
enterprise-blog/
├── cmd/                    # 应用入口
│   ├── server/            # HTTP服务器
│   └── migrate/           # 数据库迁移工具
├── internal/              # 内部代码
│   ├── config/           # 配置管理
│   ├── models/           # 数据模型
│   ├── handlers/         # HTTP处理器
│   ├── services/         # 业务逻辑层
│   ├── repository/       # 数据访问层
│   ├── middleware/       # 中间件
│   └── database/         # 数据库连接
├── pkg/                  # 公共包
│   ├── jwt/             # JWT工具
│   └── logger/          # 日志工具
├── migrations/           # 数据库迁移文件
├── tests/               # 测试文件
├── docs/                # 文档
├── Makefile             # 构建脚本
├── Dockerfile           # Docker镜像
├── go.mod              # Go模块定义
└── README.md           # 项目说明
```

## 架构设计

### 分层架构

系统采用经典的分层架构：

1. **Handler层**: HTTP请求处理
2. **Service层**: 业务逻辑
3. **Repository层**: 数据访问
4. **Database层**: 数据存储

### 设计原则

- **SOLID原则**: 单一职责、开闭原则等
- **DRY原则**: 不重复代码
- **KISS原则**: 保持简单
- **关注点分离**: 各层职责清晰

## 性能指标

### 基准测试结果

- **用户注册**: ~5000 QPS
- **文章列表**: ~8000 QPS
- **分类列表**: ~10000 QPS
- **标签列表**: ~10000 QPS
- **并发查询**: ~50000 QPS

### 响应时间

- **平均响应时间**: < 5ms
- **P95响应时间**: < 10ms
- **P99响应时间**: < 20ms

### 资源使用

- **启动内存**: ~50MB
- **运行内存**: ~100-200MB
- **峰值内存**: ~500MB

## 安全性

### 认证授权
- JWT Token认证
- 基于角色的访问控制（RBAC）
- 密码bcrypt加密
- 多种登录方式
  - 邮箱密码登录
  - 手机号验证码登录（自动创建用户）
- 密码重置功能（需要验证旧密码）

### 数据安全
- SQL注入防护
  - 参数化查询（所有用户输入通过参数绑定）
  - 白名单验证（ORDER BY 字段名和排序方向）
  - 字符验证和转义（全文搜索查询）
  - 避免字符串拼接 SQL
- XSS防护（输入验证和输出转义）
- CORS配置

### API安全
- 请求限流
- HTTPS支持（生产环境）
- Token过期机制

## 扩展性

### 水平扩展
- 无状态设计，支持多实例部署
- 共享数据库和Redis
- 负载均衡支持

### 功能扩展
- 插件化设计
- 模块化架构
- 接口抽象

### 数据扩展
- 分表策略
- 读写分离
- 缓存分层

## 文档

- [架构设计文档](./architecture.md): 详细的架构设计说明
- [技术总结](./technical_summary.md): 技术实现和挑战解决方案
- [API文档](./API.md): 完整的API接口文档
- [快速开始](./QUICKSTART.md): 快速上手指南
- [挑战与解决方案](./CHALLENGES.md): 开发中的挑战和解决方案
- [性能测试报告](../tests/performance_report.md): 性能测试结果

## 开发路线图

### 已完成
- ✅ 基础架构搭建
- ✅ 用户认证系统
- ✅ 文章管理系统
- ✅ 分类标签系统
- ✅ 评论系统
- ✅ 缓存机制
- ✅ 性能优化
- ✅ 文档完善

### 计划中
- ⏳ 邮件通知
- ⏳ 统计分析
- ⏳ GraphQL支持
- ⏳ gRPC支持
- ⏳ 微服务拆分
- ⏳ 图片缩略图生成
- ⏳ CDN集成

## 贡献指南

欢迎贡献代码！请遵循以下步骤：

1. Fork项目
2. 创建特性分支
3. 提交更改
4. 推送到分支
5. 创建Pull Request

## 许可证

MIT License

## 联系方式

如有问题或建议，请提交Issue或Pull Request。

## 致谢

感谢所有开源项目的贡献者，特别感谢：
- Gin框架团队
- PostgreSQL社区
- Redis团队
- Go语言社区

